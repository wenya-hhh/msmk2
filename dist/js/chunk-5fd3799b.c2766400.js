(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fd3799b"],{"0418":function(t,a,i){"use strict";var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("van-nav-bar",{attrs:{title:"个人信息","left-text":"","left-arrow":""},on:{"click-left":function(a){return t.zqd_go()}},scopedSlots:t._u([{key:"right",fn:function(){},proxy:!0}])})],1)},e=[],n={data(){return{}},created(){},mounted(){},methods:{zqd_go(){this.$router.push("/person")}}},o=n,c=i("c701"),l=Object(c["a"])(o,s,e,!1,null,"6e93bb8a",null);a["a"]=l.exports},"3bc3":function(t,a,i){},d2ac:function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"box"},[i("Head"),i("ul",{staticClass:"zqd_ul"},[i("li",{on:{click:function(a){t.toushow=!0}}},[i("span",[t._v("头像")]),i("div",[i("img",{attrs:{src:t.list.avatar,alt:""}})])]),i("van-popup",{style:{height:"30%"},attrs:{position:"bottom"},model:{value:t.toushow,callback:function(a){t.toushow=a},expression:"toushow"}},[i("ul",[i("li",[t._v(" 拍照 "),i("input",{attrs:{type:"file",accept:"image/*",capture:"camera",id:"takePhoto"},on:{change:t.takePhoto}})]),i("li",[t._v(" 从手机相册中选 "),i("input",{attrs:{type:"file",accept:"image/*",id:"takePhoto"},on:{change:t.takePhoto}})]),i("li",[t._v("取消")])])]),i("li",{on:{click:function(a){return t.$router.push("/set-info?tag=nickname&value="+t.list.nickname)}}},[i("span",[t._v("昵称")]),i("div",[i("span",[t._v(t._s(t.list.nickname))])])]),i("li",{attrs:{id:"mobile"}},[i("span",[t._v("手机号")]),i("div",[i("span",[t._v(t._s(t.list.mobile))])])]),i("li",{on:{click:function(a){return t.$router.push("/set-info?tag=sex&value="+t.list.sex)}}},[i("span",[t._v("性别")]),i("div",[0==t.list.sex?i("span",[t._v("男")]):t._e(),1==t.list.sex?i("span",[t._v("女")]):t._e(),3==t.list.sex?i("span",[t._v("保密")]):t._e()])]),i("li",{on:{click:function(a){t.dateshow=!0}}},[i("span",[t._v("出生日期")]),i("div",[0==t.list.birthday?i("span",[t._v("请选择")]):i("span",[t._v(t._s(t.list.birthday))])])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.dateshow,callback:function(a){t.dateshow=a},expression:"dateshow"}},[i("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirm,cancel:t.cancel},model:{value:t.currentDate,callback:function(a){t.currentDate=a},expression:"currentDate"}})],1),i("li",{on:{click:function(a){t.cityshow=!0}}},[i("span",[t._v("所在城市")]),i("div",[""==t.list.province_name?i("span",[t._v("请选择")]):i("span",[t._v(t._s(t.list.province_name+", "+t.list.city_name+", "+t.list.district_name))])])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.cityshow,callback:function(a){t.cityshow=a},expression:"cityshow"}},[i("van-area",{ref:"djj",attrs:{"area-list":t.bm,value:t.list.district_id+" "},on:{confirm:t.cityConfirm,cancel:t.cancel,change:t.Picker}})],1),i("li",{on:{click:function(a){return t.$router.push({path:"/set-info",query:{tag:"subjects",select:t.list.attr}})}}},[i("span",[t._v("学科")]),i("div",{staticClass:"xue"},t._l(t.list.attr,(function(a){return i("span",{key:a.attr_val_id},[2==a.attr_id?[t._v(" "+t._s(a.attr_value)+" ")]:t._e()],2)})),0)]),i("li",{on:{click:function(a){t.classshow=!0}}},[i("span",[t._v("年级")]),i("div",t._l(t.list.attr,(function(a){return i("span",{key:a.attr_id},[1==a.attr_id?[t._v(" "+t._s(a.attr_value)+" ")]:t._e()],2)})),0)]),i("van-popup",{style:{height:"44%"},attrs:{position:"bottom",value:t.classId},model:{value:t.classshow,callback:function(a){t.classshow=a},expression:"classshow"}},[i("van-area",{attrs:{"area-list":t.arrealist,"columns-num":"1"},on:{confirm:t.clas}})],1)],1)],1)},e=[],n=i("0418"),o=i("9870"),c={data(){return{classshow:!1,list:{},toushow:!1,dateshow:!1,cityshow:!1,currentDate:new Date,minDate:new Date(1890,0,1),maxDate:new Date,nowdate:(new Date).toLocaleDateString(),areaList:"",bm:{province_list:{},city_list:{},county_list:{}},city:"",county:"",sheng:"",tem:"",classArr:[],arrealist:{province_list:{}},arr:[],classId:0}},created(){},mounted(){this.getlist(),this.beijing(),this.getcla()},methods:{async clas(t){console.log(t),t.map(t=>{this.arr.push({attr_id:1,attr_val_id:t.code})});let{data:a}=await Object(o["v"])({user_attr:JSON.stringify(this.arr)});this.getlist(),this.classshow=!1},async Picker(t,a,i){if(0==i){this.sheng=a[i].name;a=await this.$http.get("sonArea/"+a[i].code);this.bm.city_list={},a.data.data.forEach(t=>{this.$set(this.bm.city_list,t.id,t.area_name)});var s=[];for(const t in this.bm.city_list)s.push(t);var e=await this.$http.get("sonArea/"+s[0]);e.data.data.forEach(t=>{this.$set(this.bm.county_list,t.id,t.area_name)})}else if(1==i){this.city=a[i].name;a=await this.$http.get("sonArea/"+a[i].code);a.data.data.forEach(t=>{this.$set(this.bm.county_list,t.id,t.area_name)})}else 2==i&&(this.county=a[i].name,this.tem=this.sheng+","+this.city+","+this.county)},async beijing(){var{data:t}=await this.$http.get("sonArea/0"),{data:a}=await this.$http.get("sonArea/"+this.list.province_id);console.log(a);var{data:i}=await this.$http.get("sonArea/"+this.list.city_id);console.log(i),t.data.forEach(t=>{this.$set(this.bm.province_list,t.id,t.area_name)}),a.data.forEach(t=>{this.$set(this.bm.city_list,t.id,t.area_name)}),i.data.forEach(t=>{this.$set(this.bm.county_list,t.id,t.area_name)})},async cityConfirm(t){let{data:a}=await Object(o["v"])({city_id:t[1].code,district_id:t[2].code,province_id:t[0].code});console.log(a),this.cityshow=!1,this.getlist()},async confirm(t){if(console.log(t),t.toLocaleDateString()==this.nowdate)this.$toast("出生日期最少是当前日期的前一天");else{this.birthdate=t.toLocaleDateString().split("/").join("-");let{data:a}=await Object(o["v"])({birthday:this.birthdate});this.dateshow=!1,this.getlist()}},cancel(){this.dateshow=!1},async getlist(){let{data:t}=await Object(o["s"])("userInfo");this.list=t.data,this.list.attr.forEach(t=>{t.attr_id&&(this.classId=t.attr_val_id+" ")}),console.log(this.classId)},async takePhoto(){let t=new FormData;t.append("file",event.target.files[0]);let{data:a}=await Object(o["b"])(t),i=a.data.path,{data:s}=await Object(o["v"])({avatar:i});200==s.code&&(this.getlist(),this.toushow=!1)},async getcla(){let{data:t}=await Object(o["e"])();this.classArr=t.data[0].value,t.data[0].value.map(t=>{this.$set(this.arrealist.province_list,t.id,t.name)})}},components:{Head:n["a"]}},l=c,r=(i("d559"),i("c701")),h=Object(r["a"])(l,s,e,!1,null,"37a45f38",null);a["default"]=h.exports},d559:function(t,a,i){"use strict";i("3bc3")}}]);
//# sourceMappingURL=chunk-5fd3799b.c2766400.js.map